#Colores
BLUE='\033[1;36m'
NC='\033[0m'
pathdir="/usr/local/jorge/"
includes=${pathdir}"/includes"
nameapp=""
base=""

function createIndex(){
  copy_wdir ${pathdir}index.php ${base}/index.php
  index="$(cat ${base}/index.php)"
  printf "$index" "$*" > ${base}/"index.php"
  saycreate "/index.php"
}

function createFooter(){
  footer="$(cat ${includes}partials/footer.php)"
  printf "$footer" "$*" > ${base}/"includes/partials/footer.php"
  saycreate "/includes/partials/footer.php"
}

function createHeader(){
  header="$(cat ${pathdir}includes/partials/header.php)"
  printf "$header" "$*" > ${base}/"includes/partials/header.php"
  saycreate "/includes/partials/header.php"
}

function createMenu(){
  menu="$(cat ${pathdir}includes/partials/menu.php)"
  printf "$menu" "$*" > ${base}/"includes/partials/menu.php"
  saycreate "/includes/partials/menu.php"
}

function createPackage(){
  package="$(cat ${pathdir}package.json)"
  printf "$package" "$*" > ${base}/"package.json"
  saycreate "/package.json"
}

function moveFiles(){
  copy_wdir ${pathdir}package.json ${base}/package.json
  copy_wdir ${pathdir}Gruntfile.js ${base}/Gruntfile.js
  copy_wdir ${pathdir}includes ${base}/includes
  copy_wdir ${pathdir}public ${base}/public
}

function borrarpantalla(){
  clear
}
function new(){
  printf 'Enter your App name: '
  read -r nameapp
  base=${PWD}/${nameapp}
  moveFiles
  stylus $nameapp/public/css/dev/styles.styl
  createPackage $nameapp
  cd $nameapp
  npm install
  grunt
  ..
  createIndex $nameapp
  createHeader $nameapp
  createMenu $nameapp
  createFooter $nameapp

}

function copy_wdir() {
  mkdir -p -- "$(dirname -- "$2")" && cp -R "$1" "$2" ;
}


saycreate(){
  echo "\t${BLUE}create${NC} : ${nameapp}${1}"
  sleep 0.5
}


for parametro in $*
do
  case $parametro in
     'new')
        new
        exit 0
     ;;
     'create')
      exit 0
     ;;
     *)
        borrarpantalla
        echo "Agregue comandos"
     ;;
  esac
done
